{% extends 'app/base.html' %}

{% block content %}

<div class="photo-container" >
  <div class="photo-detail">
    <!-- お気に入りボタン --> 
    {% if not request.user == photo.post_user %}
    <form action="{% url 'app:fav_photos_status' %}" method="post">{% csrf_token %}
      <input type="hidden" name="photo_id" value="{{ photo.id }}">
      {% if photo in user.fav_photos.all %}
      <input type="submit" name="submit" class="btn btn-warning" value="お気に入り"/> 
      {% else %}
      <input type="submit" name="submit" class="btn btn-outline-warning" value=" お気に入り" />
      {% endif %}
    </form>
    {% endif %}
    
    
    
    <!-- 削除ボタン -->
    {% if request.user == photo.post_user %}
    <form method="post" action="{% url 'app:photos_delete' photo.id %}">{% csrf_token %}
      <button class="btn btn-primary" type="submit" onclick='return confirm("本当に削除しますか？");'>削除</button>
    </form>
    {% endif %}
  </div>

  <h4 id="place_name">{{ photo.place_name }}</h3>

  <img src="{{ photo.image.url }}" alt="Responsive image" class="img-thumbnail shadow p-2 mb-3 bg-white rounded">

  <div class="photo-info">
    <p>投稿者：</p>
    <a href="{% url 'app:users_detail' photo.post_user.id %}">@{{ photo.post_user }}</a>
  </div>


  <!-- 以下マップで詳細を表示 -->
  <div id="gmap" class="gmap"></div>

</div>
 
<script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyAjtr9s7GMqEqGiCwbNBIBPsYVcSCfqZaw&callback=initMap" async defer></script>

<!-- jQueryの組み込み -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>


{% endblock %}

